<?xml version="1.0"?>
<launch>

  <!-- Bring up simulation and spawn a Pacifica and a Fusion -->
  <include file="$(find-pkg-share dataspeed_dbw_gazebo)/launch/dataspeed_dbw_gazebo.launch.xml" >
    <arg name="use_camera_control" value="true" />
    <arg name="world_name" value="$(find-pkg-share custom_dbw_sim_examples)/worlds/box_world.world" />
    <arg name="sim_param_file" value="$(find-pkg-share custom_dbw_sim_examples)/yaml/multi_car.yaml" />
  </include>

  <!-- Run drive-by-wire interface nodes on the Pacifica -->
  <include file="$(find-pkg-share custom_dbw_sim_examples)/launch/generic_dbw.launch.xml" >
    <arg name="vehicle_name" value="pacifica" />
    <arg name="vehicle_type" value="pacifica" />
  </include>

  <!-- Run drive-by-wire interface nodes on the Fusion -->
  <include file="$(find-pkg-share custom_dbw_sim_examples)/launch/generic_dbw.launch.xml" >
    <arg name="vehicle_name" value="fusion" />
    <arg name="vehicle_type" value="fusion" />
  </include>

  <!-- Enable drive-by-wire and send constant twist messages to each vehicle -->
  <node pkg="custom_dbw_sim_examples" exec="multi_car_cmd.py" name="cmd_pub" />

  <!-- Pre-configured Rviz display -->
  <node pkg="rviz2" exec="rviz2" name="multi_car_rviz" args="-d $(find-pkg-share custom_dbw_sim_examples)/rviz/multi_car.rviz" />

</launch>
